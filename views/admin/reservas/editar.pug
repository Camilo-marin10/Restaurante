extends ../../layout/index

block contenido
    div(class="py-12 px-4 sm:px-6 lg:px-8 bg-gray-50")
        h1(class="text-4xl font-extrabold text-red-800 mb-2 tracking-tight")= titulo
        p(class="text-lg text-gray-700 mb-8 border-b pb-4") Modifica los detalles de la reserva.
        
        if errores
            div(class="max-w-xl mx-auto mb-6")
                each error in errores
                    p(class="bg-red-500 text-white uppercase text-xs text-center p-3 font-bold rounded-lg mb-1 shadow-md")= error.msg

        div(class="bg-white shadow-2xl py-8 px-6 rounded-xl mx-auto max-w-xl border-t-4 border-red-600")
            form(method="POST" action=`/admin/reservas/editar/${datos.id}` class="space-y-6")
                input(type="hidden" name="_csrf" value= csrfToken)
                input(type="hidden" name="id" value= datos.id)

                div
                    label(class="block text-sm uppercase text-gray-600 mb-2 font-bold") Cliente
                    if datos.cliente 
                        p(class="w-full px-4 py-3 bg-gray-100 border border-gray-300 rounded-lg font-medium") #{datos.cliente.nombre} #{datos.cliente.apellido}
                    else 
                        p(class="w-full px-4 py-3 bg-red-100 border border-red-300 rounded-lg text-red-700 font-medium") Cliente no asignado o eliminado.
                    input(type="hidden" name="clienteId" value= datos.clienteId)

                div(class="grid grid-cols-1 md:grid-cols-2 gap-6")
                    div
                        label(for="fecha_reserva" class="block text-sm uppercase text-gray-600 mb-2 font-bold") Fecha
                        input(id="fecha_reserva" name="fecha_reserva" type="date" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:border-red-500 focus:ring-red-500 transition duration-150 shadow-sm" value= datos.fecha_reserva)

                    div
                        label(for="hora_reserva" class="block text-sm uppercase text-gray-600 mb-2 font-bold") Hora
                        input(id="hora_reserva" name="hora_reserva" type="time" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:border-red-500 focus:ring-red-500 transition duration-150 shadow-sm" value= datos.hora_reserva)
                
                div(class="grid grid-cols-1 md:grid-cols-2 gap-6")
                    div
                        label(for="numero_personas" class="block text-sm uppercase text-gray-600 mb-2 font-bold") No. Personas
                        input(id="numero_personas" name="numero_personas" type="number" min="1" placeholder="Ej. 4" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:border-red-500 focus:ring-red-500 transition duration-150 shadow-sm" value= datos.numero_personas)
                    
                    div
                        label(for="duracion_estimada" class="block text-sm uppercase text-gray-600 mb-2 font-bold") Duración Estimada
                        select(id="duracion_estimada" name="duracion_estimada" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:border-red-500 focus:ring-red-500 transition duration-150 shadow-sm")
                            each duracion in duraciones
                                option(value=duracion.valor selected= datos.duracion_estimada == duracion.valor ? true : false)= duracion.texto

                div
                    label(for="mesaId" class="block text-sm uppercase text-gray-600 mb-2 font-bold") Mesa Asignada
                    select(id="mesaId" name="mesaId" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:border-red-500 focus:ring-red-500 transition duration-150 shadow-sm")
                        option(value="") -- Seleccionar Mesa --
                        each mesa in mesas
                            option(value=mesa.id selected= datos.mesaId == mesa.id ? true : false)= mesa.nombre + ' (Capacidad: ' + mesa.capacidad + ')'
                        if mesas.length === 0
                            option(value="" disabled) No hay mesas activas.

                div
                    label(for="estado" class="block text-sm uppercase text-gray-600 mb-2 font-bold") Estado de la Reserva
                    select(id="estado" name="estado" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:border-red-500 focus:ring-red-500 transition duration-150 shadow-sm")
                        - const estados = ['Pendiente', 'Confirmada', 'En Curso', 'Completada', 'Cancelada', 'No-Show']
                        each estadoOpt in estados
                            option(value=estadoOpt selected= datos.estado === estadoOpt ? true : false)= estadoOpt
                
                div
                    label(for="notas" class="block text-sm uppercase text-gray-600 mb-2 font-bold") Notas de la Reserva (Opcional)
                    textarea(id="notas" name="notas" placeholder="Solicitud especial, razón de la reserva, etc." class="w-full px-4 py-3 border border-gray-300 rounded-lg placeholder-gray-400 focus:border-red-500 focus:ring-red-500 transition duration-150 shadow-sm h-24")= datos.notas

                input(type="submit" value="Guardar Cambios de Reserva" class="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 cursor-pointer rounded-lg uppercase transition duration-300 shadow-lg transform hover:scale-[1.01]")